{
  "hash": "9300d6b80554a219ca69d9412d32d649",
  "result": {
    "markdown": "---\ntitle: \"Hello, Penguins\"\nauthor: \"Lukman Aliyu\"\nformat: \n  html: default\n  pdf: default\nexecute: \n  echo: true\neditor: visual\nbibliography: references.bib\n---\n\n\n\n# Introduction\n\nI have been learning data science as a fellow of the Arewa Data Science Academy since January, 2023 and I have picked many skills. This is an attempt to practice quarto using the R programming language, in the RStudio IDE. I will work on the palmerpenguins dataset. Work in progress!\n\n## Data {.smaller}\n\nFor this analysis, we 'll use the penguins dataset from the palmerpenguins package. [@gorman2014]\n\n\n\n\n\n\n\nConverting the dataset to a tibble for a more aesthetic display\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins <- as_tibble(penguins)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(penguins)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 344\nColumns: 8\n$ species           <fct> Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel~\n$ island            <fct> Torgersen, Torgersen, Torgersen, Torgersen, Torgerse~\n$ bill_length_mm    <dbl> 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, ~\n$ bill_depth_mm     <dbl> 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, ~\n$ flipper_length_mm <int> 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186~\n$ body_mass_g       <int> 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, ~\n$ sex               <fct> male, female, female, NA, female, male, female, male~\n$ year              <int> 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007~\n```\n:::\n:::\n\n\n\nGetting summary statistics of the dataset using the summary function in base R\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      species          island    bill_length_mm  bill_depth_mm  \n Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10  \n Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  \n Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30  \n                                 Mean   :43.92   Mean   :17.15  \n                                 3rd Qu.:48.50   3rd Qu.:18.70  \n                                 Max.   :59.60   Max.   :21.50  \n                                 NA's   :2       NA's   :2      \n flipper_length_mm  body_mass_g       sex           year     \n Min.   :172.0     Min.   :2700   female:165   Min.   :2007  \n 1st Qu.:190.0     1st Qu.:3550   male  :168   1st Qu.:2007  \n Median :197.0     Median :4050   NA's  : 11   Median :2008  \n Mean   :200.9     Mean   :4202                Mean   :2008  \n 3rd Qu.:213.0     3rd Qu.:4750                3rd Qu.:2009  \n Max.   :231.0     Max.   :6300                Max.   :2009  \n NA's   :2         NA's   :2                                 \n```\n:::\n:::\n\n\n\nExploring a bit more to see the initial few rows\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n\n  head()  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 8\n  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n  <fct>   <fct>              <dbl>         <dbl>             <int>       <int>\n1 Adelie  Torgersen           39.1          18.7               181        3750\n2 Adelie  Torgersen           39.5          17.4               186        3800\n3 Adelie  Torgersen           40.3          18                 195        3250\n4 Adelie  Torgersen           NA            NA                  NA          NA\n5 Adelie  Torgersen           36.7          19.3               193        3450\n6 Adelie  Torgersen           39.3          20.6               190        3650\n# i 2 more variables: sex <fct>, year <int>\n```\n:::\n:::\n\n\n\n## Meet Quarto\n\nQuarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.\n\n## Meet the penguins\n\n![](https://raw.githubusercontent.com/quarto-dev/quarto-web/main/docs/get-started/hello/rstudio/lter_penguins.png){style=\"float:right;\" fig-alt=\"Illustration of three species of Palmer Archipelago penguins: Chinstrap, Gentoo, and Adelie. Artwork by @allison_horst.\" width=\"401\"}\n\nThe `penguins` data from the [**palmerpenguins**](https://allisonhorst.github.io/palmerpenguins \"palmerpenguins R package\") package contains size measurements for 344 penguins from three species observed on three islands in the Palmer Archipelago, Antarctica.\n\nThe plot below shows the relationship between flipper and bill lengths of these penguins.\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-pdf/plot-penguins-1.pdf)\n:::\n:::\n\n\n\n## Species\n\n@fig-bill-dim-species is a scatter plot of species of penguins\n\n\n\n::: {.cell fig.asp='0.618'}\n\n```{.r .cell-code}\nggplot(penguins,\n       aes(x=bill_length_mm, y= bill_depth_mm,color=species,shape=species)) + geom_point() + theme_minimal() + scale_color_colorblind()  + labs( x = \"Bill length (mm)\", y = \"Bill depth (mm)\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n:::\n\n::: {.cell-output-display}\n![A scatterplot of penguin's bill depth and length, colored by species of penguins.\noutput-location: slide](index_files/figure-pdf/fig-bill-dim-species-1.pdf){#fig-bill-dim-species fig-pos='H' fig-alt='A scatterplot of penguin\\'s bill depth and length, colored by species of penguins. There is a relatively strong linear association.\n'}\n:::\n:::\n\n\n\n## Penguins\n\n@tbl-penguins-top10 shows the first ten penguins from the dataset.\n\n\n\n::: {#tbl-penguins-top10 .cell tbl-cap='First 10 penguins.'}\n\n```{.r .cell-code}\npenguins %>%\n  slice_head(n=10) %>%\n  select(species,island,bill_length_mm,bill_depth_mm) %>%\n  gt()\n```\n\n::: {.cell-output-display}\n\\begin{longtable}{ccrr}\n\\toprule\nspecies & island & bill\\_length\\_mm & bill\\_depth\\_mm \\\\ \n\\midrule\nAdelie & Torgersen & 39.1 & 18.7 \\\\ \nAdelie & Torgersen & 39.5 & 17.4 \\\\ \nAdelie & Torgersen & 40.3 & 18.0 \\\\ \nAdelie & Torgersen & NA & NA \\\\ \nAdelie & Torgersen & 36.7 & 19.3 \\\\ \nAdelie & Torgersen & 39.3 & 20.6 \\\\ \nAdelie & Torgersen & 38.9 & 17.8 \\\\ \nAdelie & Torgersen & 39.2 & 19.6 \\\\ \nAdelie & Torgersen & 34.1 & 18.1 \\\\ \nAdelie & Torgersen & 42.0 & 20.2 \\\\ \n\\bottomrule\n\\end{longtable}\n:::\n:::\n\n\n\n# Analysis\n\nCheck for missing values\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmissing_values <- penguins %>% \n\n  summarise(across(everything(), ~sum(is.na(.))))  # Calculate missing values for each variable\ncat(\"Missing values:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nMissing values:\n```\n:::\n\n```{.r .cell-code}\nprint(missing_values)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 x 8\n  species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n    <int>  <int>          <int>         <int>             <int>       <int>\n1       0      0              2             2                 2           2\n# i 2 more variables: sex <int>, year <int>\n```\n:::\n:::\n\n\n\n## Data Pre-processing\n\nFirst we need to remove rows with missing values to enable easy and accurate modelling\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Remove rows with missing values\npenguins <- penguins %>% \n  drop_na()\n```\n:::\n\n\n\n## Modelling\n\nWe begin by splitting the data into training and testing sets\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Split the data into training and testing sets\n\nset.seed(123)  # For reproducibility\n\nsplit <- initial_split(penguins, prop = 0.7)\n\ntrain_data <- training(split)\n\ntest_data <- testing(split)\n```\n:::\n\n\n\nThen we build a simple linear regression model using tidymodels package\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Build a simple model using tidymodels\n\nmodel <- linear_reg() %>%\n\n  set_engine(\"lm\") %>%\n\n  set_mode(\"regression\")\n\nmodel_fit <- model %>% \n\n  fit(body_mass_g ~ bill_length_mm + bill_depth_mm, data = train_data)\n```\n:::\n\n\n\nThen, we evaluate the model, testing it on the test data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Model evaluation\n\ntrain_predictions <- predict(model_fit, train_data) %>% \n\n  bind_cols(train_data)\n\ntest_predictions <- predict(model_fit, test_data) %>% \n\n  bind_cols(test_data)\n```\n:::\n\n\n\nWe then calculate the evaluation for and testing data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate evaluation metrics for training data\ntrain_metrics <- train_predictions %>%\n  summarize(\n    rmse = sqrt(mean((body_mass_g - .pred)^2)),\n    r_squared = cor(body_mass_g, .pred)^2\n  )\n\ncat(\"Training metrics:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTraining metrics:\n```\n:::\n\n```{.r .cell-code}\nprint(train_metrics)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 x 2\n   rmse r_squared\n  <dbl>     <dbl>\n1  578.     0.488\n```\n:::\n\n```{.r .cell-code}\n# Calculate evaluation metrics for testing data\ntest_metrics <- test_predictions %>%\n  summarize(\n    rmse = sqrt(mean((body_mass_g - .pred)^2)),\n    r_squared = cor(body_mass_g, .pred)^2\n  )\n\ncat(\"Testing metrics:\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTesting metrics:\n```\n:::\n\n```{.r .cell-code}\nprint(test_metrics)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 x 2\n   rmse r_squared\n  <dbl>     <dbl>\n1  616.     0.411\n```\n:::\n:::\n\n\n\n## Modelling Results\n\nHere, I will show the plots for both the training and testing data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate residuals for training data\ntrain_residuals <- train_predictions %>%\n  mutate(residual = body_mass_g - .pred)\n\n# Create a scatter plot for training data residuals\nggplot(train_residuals, aes(x = body_mass_g, y = residual)) +\n  geom_point() +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  labs(x = \"Actual\", y = \"Residual\", title = \"Training Data Residuals\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-pdf/unnamed-chunk-15-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nFor the testing data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate residuals for testing data\ntest_residuals <- test_predictions %>%\n  mutate(residual = body_mass_g - .pred)\n\n# Create a scatter plot for testing data residuals\nggplot(test_residuals, aes(x = body_mass_g, y = residual)) +\n  geom_point() + geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") + labs(x = \"Actual\", y = \"Residual\", title = \"Testing Data Residuals\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-pdf/unnamed-chunk-16-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nWork in progress.\n\n# References\n",
    "supporting": [
      "index_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "\\usepackage{booktabs}\n\\usepackage{caption}\n\\usepackage{longtable}\n"
      ]
    },
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}